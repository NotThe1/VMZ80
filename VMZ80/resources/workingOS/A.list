0001: 0100         ; A.Z80
0002: 0100         ; 8
0003: 0100             BDOS       EQU    00005H
0004: 0100             OPEN_FILE  EQU    0FH
0005: 0100             CLOSE_FILE EQU    10H
0006: 0100             FIND_FIRST EQU    11H
0007: 0100             FIND_NEXT  EQU    12H
0008: 0100             READ_SEQ   EQU    14H
0009: 0100             RENAME_FILE EQU    17H
0010: 0100             SET_DMA    EQU    1AH
0011: 0100             GET_SIZE   EQU    023H
0012: 0100             SET_RANDREC EQU    024H
0013: 0100             defaultBuffer EQU    080H
0014: 0100
0015: 0100             recordRandom EQU    20 + 1               ; Random record field (2 bytes)
0016: 0100             recordRandomLSB EQU    recordRandom         ; LSB of Random Record
0017: 0100             recordRandomMSB EQU    recordRandom + 1     ; MSB of Random Record
0018: 0100             recordRandomOVF EQU    recordRandom + 2     ; Random Record Overflow
0019: 0100
0020: 0100             TPA        EQU    0100H
0021: 0100
0022: 0100                        ORG    TPA
0023: 0100             Start:
0024: 0100 31 BC 02               LD     SP,Stack
0025: 0103
0026: 0103 2A 14 01               LD     HL,(evPermanent)
0027: 0106 E9                     JP     (HL)
0028: 0107
0029: 0107             errPermanent:
0030: 0107 21 14 01               LD     HL,evPermanent
0031: 010A C3 0F 01               JP     GoToError
0032: 010D 00                     NOP
0033: 010E 76                     HALT
0034: 010F         ;************Error message handler **********************
0035: 010F             GoToError:
0036: 010F 5E                     LD     E,(HL)
0037: 0110 23                     INC    HL
0038: 0111 56                     LD     D,(HL)               ; address of routine in DE
0039: 0112 EB                     EX     DE,HL
0040: 0113 E9                     JP     (HL)                 ; vector to subroutine
0041: 0114         ;************ Error Vectors *****************************
0042: 0114 3A 01       evPermanent: DW     erPermanent          ; pererr permanent error subroutine
0043: 0116
0044: 0116
0045: 0116             FCB:
0046: 0116
0047: 0116 00          DISK:      DB     00
0048: 0117 42 20 20 20 20 20 20 20     NAME:      DB     'B       '
0049: 011F 41 52 4B     TYPE:      DB     'ARK'
0050: 0122 00          EXT:       DB     0
0051: 0123 00 00       RESV:      DB     0,0
0052: 0125 00          RC:        DB     0
0053: 0126 00 00       ALLOC:     DW     0
0054: 0128 00 00                  DW     0
0055: 012A 00 00                  DW     0
0056: 012C 00 00                  DW     0
0057: 012E 00 00                  DW     0
0058: 0130 00 00                  DW     0
0059: 0132 00 00                  DW     0
0060: 0134 00 00                  DW     0
0061: 0136 00          REC_SEQ:   DB     0
0062: 0137 00 00       REC_RANDOM: DW     0000H
0063: 0139 00          REC_RAN_O: DB     00
0064: 013A
0065: 013A
0066: 013A             erPermanent:
0067: 013A 00                     NOP
0068: 013B 76                     HALT
0069: 013C                        DS     0100H
0070: 023C 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00                DB     0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0071: 024C 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00                DB     0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0072: 025C 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00                DB     0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0073: 026C 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00                DB     0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0074: 027C 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00                DB     0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0075: 028C 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00                DB     0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0076: 029C 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00                DB     0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0077: 02AC 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00                DB     0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
0078: 02BC             Stack:
0079: 02BC
0080: 02BC         ;DOLLARInclude ./HeaderForA.Z80
           ************************   Xref   ************************
0000: $               02AC
0053: ALLOC           0126
0003: BDOS            0005
0005: CLOSE_FILE      0010
0013: defaultBuffer   0080
0047: DISK            0116
0066: erPermanent     013A   0042
0029: errPermanent    0107
0042: evPermanent     0114   0026 0030
0050: EXT             0122
0045: FCB             0116
0006: FIND_FIRST      0011
0007: FIND_NEXT       0012
0011: GET_SIZE        0023
0035: GoToError       010F   0031
0048: NAME            0117
0004: OPEN_FILE       000F
0052: RC              0125
0008: READ_SEQ        0014
0063: REC_RAN_O       0139
0062: REC_RANDOM      0137
0061: REC_SEQ         0136
0015: recordRandom    0015   0016 0017 0018
0016: recordRandomLSB 0015
0017: recordRandomMSB 0016
0018: recordRandomOVF 0017
0009: RENAME_FILE     0017
0051: RESV            0123
0010: SET_DMA         001A
0012: SET_RANDREC     0024
0078: Stack           02BC   0024
0023: Start           0100
0020: TPA             0100   0022
0049: TYPE            011F
